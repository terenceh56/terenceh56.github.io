---
import BaseHead from '@/components/BaseHead.astro';
import Header from '@/components/Header.astro';
import Footer from '@/components/Footer.astro';
import Profile from '@/components/Profile.astro';
import Comment from '@/components/Comment.astro';
import Toc from '@/components/Toc.astro';
import ProtectedContent from '@/components/ProtectedContent.astro';
import { comment, config } from '@/consts';
import ScrollToTop from '@/components/ScrollToTop.astro';
import { t } from '@/i18n/utils';
import KaTeXLoader from '@/components/KaTeXLoader.astro';

const {
  frontmatter = {
    comment: false,
    donate: false,
    toc: false,
    mathjax: false,
    mermaid: false,
  },
  headings,
} = Astro.props;
---

<html lang={config.lang}>
  <BaseHead
    title={frontmatter.title}
    description={frontmatter.description}
    mathjax={false}
    mermaid={frontmatter.mermaid}
    ogImage={frontmatter.ogImage}
  />

  <body class="bg-skin-secondary">
    <Header />
    <main
      class="container relative min-h-full p-4 pt-20 pb-32 text-skin-base"
      id="app"
    >
      <div class="grid grid-cols-4 gap-8">
        <div
          class="col-span-4 space-y-4 xl:col-span-3 xl:col-start-1 first:space-y-2 markdown-body"
        >
          <button
            class="flex items-center outline-none cursor-pointer text-md hover:text-skin-active"
            style="background-color: inherit;"
            onclick="history.back()"
          >
            <i class="mr-2 ri-arrow-left-line"></i>
            <span>{t('home.goBack')}</span>
          </button>
          <ProtectedContent tags={frontmatter.tags}>
            <slot />
          </ProtectedContent>
          {frontmatter.comment && comment.enable && <Comment />}
        </div>
        <div class="relative hidden col-span-1 lg:block lg:col-start-4">
          <Profile />
          {frontmatter.toc && <Toc headings={headings} />}
        </div>
        <ScrollToTop />
      </div>
      <Footer />
    </main>
    <KaTeXLoader />
  </body>
</html>

<script>
  // minimal client enhancements kept same as BlogPost
</script>
