---
import IndexPage from "@/layouts/IndexPage.astro";
import {getCollectionByName} from "@/utils/getCollectionByName";
import getUniqueTags from "@/utils/getUniqueTags";
import getUrl from "@/utils/getUrl";
import {t} from '../../i18n/utils'

// Aggregate tags from all collections EXCEPT Beyond the Surface (reflections/milestones)
let allPosts = [];
const collectionsToTry = ['notes', 'papers'];
for (const col of collectionsToTry) {
  try {
    const c = await getCollectionByName(col);
    if (c && c.length) allPosts = allPosts.concat(c);
  } catch (err) {
    // Ignore missing collections
  }
}
let tagArr = getUniqueTags(allPosts);
---

<IndexPage title={t('sidebar.tags') + ' [normal]'}>
  <div class="flex flex-wrap">
    {
      (
        tagArr
        &&
          tagArr.map((tag) =>
            <a class="inline-block truncate m-1 border p-1 text-sm rounded hover:text-skin-active" title={tag} href={getUrl("/tags/") + tag}>{tag}</a>
          )
      )
    }
  </div>
</IndexPage>
