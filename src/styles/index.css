@import url('./github-markdown.css');
@import "remixicon/fonts/remixicon.css";
@import "remark-aside.css";
@tailwind base;
@tailwind components;
@tailwind utilities;

@font-face {
  font-family: "jetbrains-mono";
  src: url('./JetBrainsMono-Regular.ttf');
}

/* Optional: load SF Pro fonts if you provide them in `src/styles/fonts/` or `public/fonts/`.
   SF Pro is a proprietary Apple font — you must supply the files yourself.
   Put WOFF2 or WOFF files at `src/styles/fonts/SFProDisplay-Regular.woff2`,
   `src/styles/fonts/SFProText-Regular.woff2` (or in `public/fonts/`) and they will be used.
   
   These font-face declarations have been disabled as the font files are not included.
   The system will fall back to the fonts defined in the font-family stack.
*/
/* Disabled - files not found
@font-face {
  font-family: 'SF Pro Display';
  src: url('./fonts/SFProDisplay-Regular.woff2') format('woff2'),
       url('./fonts/SFProDisplay-Regular.woff') format('woff');
  font-weight: 400;
  font-style: normal;
  font-display: swap;
}
@font-face {
  font-family: 'SF Pro Text';
  src: url('./fonts/SFProText-Regular.woff2') format('woff2'),
       url('./fonts/SFProText-Regular.woff') format('woff');
  font-weight: 400;
  font-style: normal;
  font-display: swap;
}
*/

/**
覆写tailwindcss 默认样式
 */

html {
  height: 100%;
  scroll-padding-top: 72px;
  font-family: 'SF Pro Display', 'SF Pro Text', -apple-system, BlinkMacSystemFont, "Segoe UI", "Helvetica Neue", Arial, sans-serif;
  transition: background-color 0.3s ease, color 0.3s ease;
}

body {
  height: 100%;
  font-family: 'SF Pro Display', 'SF Pro Text', -apple-system, BlinkMacSystemFont, "Segoe UI", "Helvetica Neue", Arial, sans-serif;
  transition: background-color 0.3s ease, color 0.3s ease;
}

ol,
ul,
menu {
  list-style: none;
  margin: 0;
  padding: 0;
}

@layer base {

  :root,
  html[data-theme="light"] {
    --color-fill: 241, 241, 241;
    --color-fill-secondary: 251, 251, 251;
    --color-card: 241, 241, 241;
    --color-text: 80, 73, 69;
    --color-text-dodge: 150, 150, 150;
    --color-text-active: 181, 118, 20;
    --color-border: 104, 157, 106;
    --color-border-active: 14, 192, 124;
    --color-modal: 52, 58, 64;
  }

  html[data-theme="dark"] {
    --color-fill: 40, 40, 40;
    --color-fill-secondary: 52, 58, 64;
    --color-card: 40, 42, 54;
    --color-text: 249, 244, 227;
    --color-text-dodge: 150, 150, 150;
    --color-text-active: 250, 189, 47;
    --color-border: 214, 93, 14;
    --color-border-active: 7, 102, 120;
    --color-modal: 251, 251, 251;
  }

  h1,
  h2,
  h3,
  h4,
  h5,
  h6 {
    font-family: 'SF Pro Display', 'SF Pro Text', -apple-system, BlinkMacSystemFont, "Segoe UI", "Helvetica Neue", Arial, sans-serif;
    font-weight: 700;
  }

  #sun-icon,
  html[data-theme="dark"] #moon-icon {
    display: none;
  }

  #moon-icon,
  html[data-theme="dark"] #sun-icon {
    display: block;
  }

}

@layer components {

  /* 导航栏的按钮样式 */
  .header-link {
    padding: 6px 12px;
    border-radius: 8px;
    transition: background-color 0.3s ease;
  }

  .header-link-active {
    background: rgba(var(--color-text), 0.15);
  }

  /* Apply hover effect without underline */
  .header-link:hover {
    background: rgba(var(--color-text), 0.08);
  }

  .header-link:focus {
    text-decoration: none;
    outline: none;
  }

  .header-btn {
    @apply cursor-pointer border rounded py-1 px-2 bg-skin-fill hover:text-skin-active mx-2 z-10
  }

  /*侧边栏每个栏目共有样式*/
  .aside-widget {
    @apply flex items-center w-full mb-2;
    border-bottom: 1px solid rgba(var(--color-text), .3);
  }

  /* 侧边最近评论列表样式 */
  .waline-comment-content {
    @apply p-1 overflow-auto break-words max-h-72 hover:text-skin-active;
  }

  .waline-comment-author {
    @apply mb-1 break-words text-end hover:text-skin-active;
  }

  a {
    @apply cursor-pointer;
  }

  .menu-icon {
    @apply text-xl mr-2
  }

  /* markdown内容图片样式 */
  .image-cols-2 {
    @apply grid gap-4 grid-cols-2 my-2
  }

  .image-cols-3 {
    @apply grid gap-4 grid-cols-3 my-2;
  }

  body,
  header,
  .glass,
  .bg-skin-card,
  .bg-skin-fill,
  .bg-skin-secondary,
  .aside-widget,
  footer {
    transition: background-color 0.3s ease, color 0.3s ease, border-color 0.3s ease, box-shadow 0.3s ease;
  }

  * {
    scroll-behavior: smooth;
  }

  /* iOS-style glassmorphic navigation bar effect */
  .glass {
    background: rgba(var(--color-fill), 0);
    backdrop-filter: blur(3px) saturate(100%);
    -webkit-backdrop-filter: blur(3px) saturate(180%);
    border-bottom: 1px solid rgba(var(--color-text), 0.1);
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
    will-change: backdrop-filter, background-color, box-shadow;
    transition: backdrop-filter 0.3s ease, background-color 0.3s ease, box-shadow 0.3s ease, border-color 0.3s ease;
  }

  /* Enhanced blur when scrolling (content underneath) */
  .glass--active {
    background: rgba(var(--color-fill), 0);
    backdrop-filter: blur(3px) saturate(100%);
    -webkit-backdrop-filter: blur(3px) saturate(180%);
    border-bottom: 1px solid rgba(var(--color-text), 0.15);
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
  }

  /* 分割线 */
  .divider-vertical {
    height: .9em;
    width: 1px;
    background-color: rgba(var(--color-text), .2);
    border: none;
    margin: 0 8px;
  }

  .divider-horizontal {
    clear: both;
    width: 100%;
    height: 1px;
    min-width: 100%;
    margin: 12px 0;
    background-color: rgba(var(--color-text), .2);
  }

  .divider-horizontal-mini {
    display: flex;
    clear: both;
    width: 100%;
    height: 1px;
    min-width: 100%;
    margin: 8px 0;
    background-color: rgba(var(--color-text), .2);
  }

  /* 重写markdown样式 */
  .markdown-body {
    background-color: inherit;
  }

  .markdown-body p,
  li,
  ul,
  ol,
  div,
  a {
    line-height: 26px;
  }

  /* 修改waline评论侧边栏样式 */
  .waline-comment-content-author {
    text-align: end;
    margin-bottom: 6px;
  }

  .wl-emoji {
    height: 24px;
    display: inline-block;
  }

  /*  网站列表样式清空 */
  ul,
  ol,
  menu {
    list-style: none;
  }

  /* markdown 列表样式 */
  .markdown-body menu,
  .markdown-body ul {
    list-style: disc;
  }

  .markdown-body ol {
    list-style: decimal;
  }

  /* 修改滚动条样式 */

  ::-webkit-scrollbar {
    width: 10px;
    height: 16px;
    background-color: #edede9;
  }

  ::-webkit-scrollbar-thumb {
    background-color: #c0c4cc;
    border-radius: 4px;
  }

  /* 置顶文字样式 */
  .post-sticky {
    font-weight: 400;
    height: 20px;
    padding: 0 6px;
    margin-right: 5px;
    line-height: 20px;
    font-size: 16px;
    white-space: nowrap;
    vertical-align: 2px;
    color: rgb(var(--color-fill));
    background-color: rgb(var(--color-text));
    opacity: 0.8;
    border-radius: 2px 6px;
  }

  #toc a:hover {
    color: rgb(var(--color-text-active));
  }

  .github-avatar {
    border-radius: 50%;
    width: 32px;
    height: 32px;
    object-fit: cover;
    box-shadow: 0 0 10px rgba(0, 0, 0, 0.2);
  }

  .avatar {
    border-radius: 50%;
    padding: 4px;
    width: 96px;
    height: 96px;
    object-fit: cover;
    background-color: transparent;
    box-shadow: 0 0 10px rgba(0, 0, 0, 0.2);
  }

  .expressive-code {
    margin: 1rem 0;
  }

  /* fix mathjax style */
  .MathJax {
    text-align: left !important;
  }

  .MathJax svg {
    display: inline;
  }

  /* Page exit: when navigating from intro, fade/scale out intro container */
  .page-exit .intro-container {
    transform: scale(0.98);
    opacity: 0;
    transition: transform 320ms ease, opacity 320ms ease;
  }

  /* Header drop animation only when explicitly triggered */
  header.header--drop {
    transform: translateY(-100%);
    opacity: 0;
    animation: headerDrop 360ms ease forwards 80ms;
  }

  @keyframes headerDrop {
    to {
      transform: translateY(0);
      opacity: 1;
    }
  }

  /* After header has dropped once, mark it as dropped so no animation runs again */
  header.header--dropped {
    transform: translateY(0) !important;
    opacity: 1 !important;
    /* no transitions/animations on this state - it's the stable final state */
    animation: none !important;
    transition: none !important;
  }

  /* Header "up" state used when navigating to homepage */
  header.header--up {
    transform: translateY(-100%);
    opacity: 0;
    transition: transform 280ms ease, opacity 280ms ease;
  }

  /* Page content fade-in (does not affect header) */
  main#app {
    opacity: 0;
    transform: translateY(6px);
    animation: contentFadeIn 420ms ease 140ms forwards;
  }

  @keyframes contentFadeIn {
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  /* Slight hover emphasis for category buttons on intro */
  .category-btn {
    will-change: transform, opacity;
  }

  .category-btn:active {
    transform: translateY(1px) scale(.995);
  }

  /* Reduce header flashing: don't re-run the drop animation if header already has been dropped
   (this CSS ensures the header is visible by default and the drop animation only plays
   when the class is explicitly added by script). */
  /* Header base styles: make header visible by default to avoid initial flash on navigation */
  header {
    opacity: 1;
    transform: translateY(0);
    will-change: transform, opacity;
  }

  /* small transition for header-up movements only (when class added) */
  header.header--up {
    transition: transform 280ms ease, opacity 280ms ease;
  }
}

/* small transition for header-up movements only (when class added) */
header.header--up {
  transition: transform 280ms ease, opacity 280ms ease;
}

/* Mobile-specific fixes */
@media (max-width: 1279px) {

  /* Disable sticky positioning on mobile - let content flow naturally */
  .lg\:sticky {
    position: static !important;
  }

  /* Add bottom padding to main content to prevent footer overlap */
  main#app {
    padding-bottom: 120px !important;
    padding-left: 1rem !important;
    padding-right: 1rem !important;
  }

  /* Mobile menu overlay with slide-in animations */
  #mobile-menu,
  #personal-info {
    margin-top: 36px;
    /* iOS glassmorphism - MUST have tiny opacity for blur to work */
    background: rgba(var(--color-fill), 0.02);
    backdrop-filter: blur(3px) saturate(100%);
    -webkit-backdrop-filter: blur(3px) saturate(180%);
    will-change: backdrop-filter, background-color, box-shadow;
    transition: transform 0.3s ease-in-out, opacity 0.3s ease-in-out, backdrop-filter 0.3s ease;
  }

  /* Slide-in animation for mobile menu (from left) */
  #mobile-menu {
    transform: translateX(-100%);
    opacity: 0;
  }

  #mobile-menu:not(.hidden) {
    transform: translateX(0);
    opacity: 1;
  }

  /* Slide-in animation for personal info (from right) */
  #personal-info {
    transform: translateX(100%);
    opacity: 0;
  }

  #personal-info:not(.hidden) {
    transform: translateX(0);
    opacity: 1;
  }

  /* Staggered fade-in animation for menu items */
  #mobile-menu a,
  #personal-info>div>* {
    opacity: 0;
    transform: translateY(-10px);
    animation: menuItemFadeIn 0.4s ease-out forwards;
  }

  /* When menu is hidden, reset animation */
  #mobile-menu.hidden a,
  #personal-info.hidden>div>* {
    opacity: 0;
    animation: none;
  }

  /* Staggered delays for each menu item */
  #mobile-menu a:nth-child(1),
  #personal-info>div>*:nth-child(1) {
    animation-delay: 0.1s;
  }

  #mobile-menu a:nth-child(2),
  #personal-info>div>*:nth-child(2) {
    animation-delay: 0.15s;
  }

  #mobile-menu a:nth-child(3),
  #personal-info>div>*:nth-child(3) {
    animation-delay: 0.2s;
  }

  #mobile-menu a:nth-child(4),
  #personal-info>div>*:nth-child(4) {
    animation-delay: 0.25s;
  }

  #mobile-menu a:nth-child(5),
  #personal-info>div>*:nth-child(5) {
    animation-delay: 0.3s;
  }

  #mobile-menu a:nth-child(6),
  #personal-info>div>*:nth-child(6) {
    animation-delay: 0.35s;
  }

  /* Make button styles from desktop hover permanent on mobile */
  #mobile-menu a {
    background: rgba(var(--color-text), 0.08);
    border-radius: 8px;
    padding: 6px 12px;
    transition: background-color 0.3s ease;
  }

  @keyframes menuItemFadeIn {
    from {
      opacity: 0;
      transform: translateY(-10px);
    }

    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  /* Profile section adjustments for mobile */
  .site-profile {
    height: auto !important;
    min-height: 200px;
    padding: 1.5rem 1rem !important;
  }

  .avatar {
    width: 80px !important;
    height: 80px !important;
    margin-bottom: 0.75rem !important;
  }

  /* Better text sizing on mobile */
  .site-profile .text-center {
    font-size: 0.9rem;
    line-height: 1.4;
    padding: 0 0.5rem;
  }

  .site-profile .text-sm {
    font-size: 0.8rem;
  }

  /* Adjust icon sizes in mobile menu */
  #personal-info .avatar {
    width: 72px !important;
    height: 72px !important;
  }

  #personal-info .text-2xl {
    font-size: 1.5rem;
  }

  /* Adjust header buttons for mobile */
  .header-btn {
    padding: 0.5rem;
    margin: 0 0.25rem;
  }

  /* Better mobile menu item spacing */
  #mobile-menu .py-2 {
    padding-top: 1rem;
    padding-bottom: 1rem;
  }

  /* Improve readability of links in mobile menu */
  #mobile-menu a,
  #personal-info a {
    font-size: 1rem;
    padding: 0.5rem;
    display: inline-block;
  }

  /* Fix text wrapping in mobile personal info */
  #personal-info .mb-2 {
    font-size: 0.9rem;
    line-height: 1.5;
    word-wrap: break-word;
    overflow-wrap: break-word;
    hyphens: auto;
  }
}

/* Extra small mobile devices */
@media (max-width: 640px) {

  /* Even smaller profile on very small screens */
  .site-profile {
    min-height: 180px;
    padding: 1rem 0.75rem !important;
  }

  .avatar {
    width: 64px !important;
    height: 64px !important;
  }

  #personal-info .avatar {
    width: 60px !important;
    height: 60px !important;
  }

  /* Smaller text on very small screens */
  .site-profile .text-center {
    font-size: 0.85rem;
  }

  /* Adjust header for small screens */
  header .text-2xl {
    font-size: 1.25rem;
  }

  header img.h-8 {
    height: 1.75rem;
  }

  /* Reduce padding on very small screens */
  main#app {
    padding-left: 0.75rem !important;
    padding-right: 0.75rem !important;
  }

  /* Smaller icons in mobile menu */
  #personal-info .text-2xl {
    font-size: 1.25rem;
  }

  .menu-icon {
    font-size: 1rem;
    margin-right: 0.5rem;
  }
}