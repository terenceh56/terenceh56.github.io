---
import {site, infoLinks} from "@/consts";
import getUrl from "@/utils/getUrl";
import { getCollectionByName } from "@/utils/getCollectionByName";
import getUniqueCategory from "@/utils/getUniqeCategory";

let _posts = await getCollectionByName('blog');
let categories = getUniqueCategory(_posts) || [];
---

<div class="intro-container flex flex-col items-center justify-center min-h-screen text-center">
  <div class="max-w-2xl">
    <!-- Avatar -->
    <img class="avatar mb-8 mx-auto" src={getUrl(site.avatar)} alt="avatar"/>
    
    <!-- Main Title -->
    <h1 class="text-4xl md:text-5xl font-bold mb-4 text-skin-base">
      {site.author}
    </h1>
    
    <!-- Motto/Description -->
    <p class="text-lg md:text-xl mb-8 text-skin-dodge leading-relaxed">
      {site.motto}
    </p>
    
    <!-- Description -->
    <p class="text-base md:text-lg mb-12 text-skin-base max-w-xl mx-auto leading-relaxed">
      {site.description}
    </p>
    
    <!-- Categories (top) -->
    <div class="flex items-center justify-center flex-wrap gap-3 mb-6">
      {
        categories.map(cat => (
          <a
            href={getUrl(`/category/${cat}`)}
            class="px-3 py-1 text-sm rounded border border-skin-base hover:bg-skin-card hover:text-skin-active transition-colors"
            title={`Category: ${cat}`}
          >
            {cat}
          </a>
        ))
      }
    </div>

    <!-- Social Links -->
    <div class="flex items-center justify-center flex-wrap gap-4 mb-12">
      {
        infoLinks.map((infoItem) => 
          infoItem.outlink && (
            <a 
              title={infoItem.name} 
              href={infoItem.outlink} 
              target="_blank"
              class="hover:text-skin-active transition-colors duration-200"
            >
              <i class={infoItem.icon + " text-3xl"}/>
            </a>
          )
        )
      }
    </div>
    
    <!-- CTA Buttons (optional: keep if desired) -->
    <div class="flex flex-wrap justify-center gap-4 mt-6">
      <a
        href="/blog/1"
        class="px-6 py-3 rounded-lg bg-skin-fill hover:bg-skin-card text-skin-base hover:text-skin-active transition-all duration-200 border border-skin-base"
      >
        Read My Blog
      </a>
      <a
        href="/feed/1"
        class="px-6 py-3 rounded-lg bg-skin-card hover:bg-skin-fill text-skin-base hover:text-skin-active transition-all duration-200 border border-skin-base"
      >
        Latest Feed
      </a>
    </div>
  </div>
</div>

<style>
  .intro-container {
    animation: fadeIn 0.8s ease-in-out;
  }
  
  @keyframes fadeIn {
    from {
      opacity: 0;
      transform: translateY(20px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }
</style>
